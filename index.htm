<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<meta name=Generator content="Microsoft Word 15 (filtered)">
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:8.0pt;
	margin-left:0in;
	line-height:107%;
	font-size:11.0pt;
	font-family:"Calibri",sans-serif;}
a:link, span.MsoHyperlink
	{color:#0563C1;
	text-decoration:underline;}
.MsoChpDefault
	{font-family:"Calibri",sans-serif;}
.MsoPapDefault
	{margin-bottom:8.0pt;
	line-height:107%;}
@page WordSection1
	{size:8.5in 11.0in;
	margin:1.0in 1.0in 1.0in 1.0in;}
div.WordSection1
	{page:WordSection1;}
-->
</style>

</head>

<body lang=EN-US link="#0563C1" vlink="#954F72" style='word-wrap:break-word'>

<div class=WordSection1>

<p class=MsoNormal align=center style='text-align:center'><span
style='font-size:18.0pt;line-height:107%'>CSCI 3907 Project 3: Image
Homographies</span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='font-size:18.0pt;line-height:107%'>Mike Ehnot</span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='font-size:18.0pt;line-height:107%'><a
href="https://github.com/MichaelEhnot/CSCI-3907-Project3">https://github.com/MichaelEhnot/CSCI-3907-Project3</a>
</span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='font-size:18.0pt;line-height:107%'><img border=0 width=721 height=361
id="Picture 2" src="index_files/image001.jpg"
alt="A screen shot of a video game&#10;&#10;Description automatically generated with low confidence"></span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='font-size:14.0pt;line-height:107%'>This project uses linear algebra to align
two separate images with shared features into one combined image. The main tool
that allows for this image altering to happen is the homography. A homography
is 3x3 matrix that serves a mapping from one image to another. Using the right
homography on one image will warp that image such that it is seen from the same
perspective as another image. To calculate the homography between two images,
you must find corresponding points between the two images. Those corresponding
points are used to solve a system of linear equations that produce the
homography mapping between the two images. From, there the homography can be
used to warp the entire image into the perspective of the first image.</span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='font-size:14.0pt;line-height:107%'>&nbsp;</span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='font-size:14.0pt;line-height:107%'><img border=0 width=640 height=360
id="Picture 4" src="index_files/image002.jpg"
alt="A picture containing text, traveling&#10;&#10;Description automatically generated"><img
border=0 width=640 height=360 id="Picture 3" src="index_files/image003.jpg"
alt="A train on the railway tracks&#10;&#10;Description automatically generated with low confidence"></span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='font-size:14.0pt;line-height:107%'>To begin, you start with two images that
share some common features. In the images above, some of the same road barriers
are in each image.</span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='font-size:14.0pt;line-height:107%'>&nbsp;</span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='position:absolute;z-index:251661312;left:0px;margin-left:1157px;
margin-top:599px;width:180px;height:138px'><img width=144 height=110
src="index_files/image004.png"></span><span style='position:absolute;
z-index:251659264;left:0px;margin-left:256px;margin-top:623px;width:165px;
height:131px'><img width=132 height=105 src="index_files/image005.png"></span><span
style='font-size:14.0pt;line-height:107%'><img border=0 width=507 height=292
id="Picture 5" src="index_files/image006.png"
alt="A screen shot of a video game&#10;&#10;Description automatically generated with medium confidence"><img
border=0 width=538 height=294 id="Picture 6" src="index_files/image007.png"
alt="A screen shot of a video game&#10;&#10;Description automatically generated with low confidence"></span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='font-size:14.0pt;line-height:107%'>As seen above, corresponding points
on the corners of the road barriers are marked in red. Those are the point that
will be used to compute the homography. It seems best to pick points on corners
of objects because they are easy to identify in both images.</span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='font-size:14.0pt;line-height:107%'>&nbsp;</span></p>

<p class=MsoNormal align=center style='text-align:center'><img border=0
width=738 height=412 id="Picture 9" src="index_files/image008.png"
alt="CS194-26 Proj6 Madeline Wu"></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='font-size:14.0pt;line-height:107%'>The corresponding points are then put
into this system of equations where the coordinates of the first and second
image are denoted by (x,y) and (x’,y’) the subscript refers to which pair of
corresponding points is being used. This system only requires 4 corresponding
points to be solved but increasing the number of points increases the accuracy
of the homography. My implementation used 5 points to calculate the homography.
This equation was solved using Single Value Decomposition, a method used for
solving matrix equations of the for Ax=b. Now that the 3x3 homography matrix is
found, it can be used to warp an entire image.</span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='font-size:14.0pt;line-height:107%'><img border=0 width=666 height=419
id="Picture 10" src="index_files/image009.png"
alt="Graphical user interface&#10;&#10;Description automatically generated with low confidence"></span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='font-size:14.0pt;line-height:107%'>This is what the left hand image from
above looks like when it is warped into the perspective of the right hand image
from above. My code uses the homography matrix to do a projective transform on
the original image. Now the two images can be combined.</span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='font-size:14.0pt;line-height:107%'><img border=0 width=917 height=458
id="Picture 11" src="index_files/image010.jpg"
alt="A screen shot of a video game&#10;&#10;Description automatically generated with low confidence"></span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='font-size:14.0pt;line-height:107%'>The combined image mosaic is now a
combination of the left and right images from above. The images were combined
by adding a semi-transparent alpha channel to each image and placing them on
the same plane. There are certainly areas that look very well combined like the
road barrier on the left, but there are also areas that not as well lined up. The
road barrier towards the top of the image is a little off. This could possibly
be due to lens distortions that are made by wide angle cameras.</span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='font-size:14.0pt;line-height:107%'>&nbsp;</span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='font-size:14.0pt;line-height:107%'>&nbsp;</span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='font-size:18.0pt;line-height:107%'>Image Rectification</span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='font-size:14.0pt;line-height:107%'>Another use for Homographies is image
rectification. The example above shows an image being warped onto the plane of
another image, but Homographies can also be used to warp images onto a
pre-determined plane.</span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='font-size:14.0pt;line-height:107%'><img border=0 width=504 height=378
id="Picture 12" src="index_files/image011.jpg"
alt="Letter&#10;&#10;Description automatically generated with medium confidence"></span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='font-size:14.0pt;line-height:107%'>Here is a picture of a metro-card
where the camera is not directly facing the front of the card. A homography can
be used to make it appear as if the camera is directly in front of the card.
The process is similar to the process above. You first pick points on the card,
then you simply hard code the desired shape of the object as corresponding
points to the first set of points. This can be done by manually inputting a
rectangle shape into the code, or as I did it, simply eyeball the desired shape
onto a blank image by selecting points with the mouse.</span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='font-size:14.0pt;line-height:107%'><img border=0 width=471 height=268
id="Picture 13" src="index_files/image012.png"
alt="A picture containing graphical user interface&#10;&#10;Description automatically generated"></span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='font-size:14.0pt;line-height:107%'>Now the card is directly facing the
camera. Unfortunately, the homography did not retain the original quality of the
image, but this can be solved by obtaining a more accurate homography. A more
accurate homography can be found by obtaining more corresponding points to
solve the matrix equation, and a homography can be improved by selecting the
corresponding points with more accuracy.</span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='font-size:14.0pt;line-height:107%'><img border=0 width=336 height=252
id="Picture 14" src="index_files/image013.jpg"
alt="A close-up of a dollar bill&#10;&#10;Description automatically generated with medium confidence"><img
border=0 width=442 height=229 id="Picture 15" src="index_files/image014.png"
alt="A picture containing calendar&#10;&#10;Description automatically generated"></span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='font-size:14.0pt;line-height:107%'>I also tried this method on a less
flat item. Since the dollar is a little crumpled and not completely flat, there
is even more warping in the final image.</span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='font-size:14.0pt;line-height:107%'>&nbsp;</span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='font-size:18.0pt;line-height:107%'>Bells and Whistles</span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='font-size:14.0pt;line-height:107%'>This method can also be used to
superimpose images onto another image. Using the metro-card image from before,
you can place that image onto another object using a homography.</span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='font-size:14.0pt;line-height:107%'><img border=0 width=472 height=354
id="Picture 16" src="index_files/image015.jpg"
alt="Letter&#10;&#10;Description automatically generated with medium confidence"><img
border=0 width=471 height=354 id="Picture 17" src="index_files/image016.jpg"
alt="A picture containing text, water&#10;&#10;Description automatically generated"></span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='font-size:14.0pt;line-height:107%'>For example, you can use a homography
to change the dollar bill into the metro-card using the same process as before</span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='font-size:14.0pt;line-height:107%'><img border=0 width=622 height=467
id="Picture 18" src="index_files/image017.jpg"
alt="Text&#10;&#10;Description automatically generated"></span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='font-size:14.0pt;line-height:107%'>Now, the metro card is lined up with
the dollar bill in the same position as before. With further editing, you can
mask out the dollar and blend the two images so that the metro card is
seamlessly integrated into the image.</span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='font-size:14.0pt;line-height:107%'>&nbsp;</span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='font-size:18.0pt;line-height:107%'>Conclusion</span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='font-size:14.0pt;line-height:107%'>This was a fairly challenging project
in many ways. The first major challenge I faced was figuring out how to set up
and solve the system of linear equations to find the homography matrix. This involved
trying many different solving methods. Specifically, it was challenging to find
a method that would properly solve the overdetermined matrix without producing
a trivial solution. After that point, the warped images seemed to come out
decently. The next challenge was finding a way to combine the two images after
the warping was done. This was frustrating because the image size would stay
the same during the warping, so a lot of the image was cut off due to this. The
solution I found was to pad all the images with empty pixels before warping them.
This allowed for the images to still be fully present after being warped from
its original shape. Now, I was able to use a blending tool from Pillow that overlapped
the two images and made their alpha channels semi-transparent so both images could
be seen. This was not a perfect solution because I wish to be able to pick and
choose which parts of the image to include in the final image. It seems like
this process would involve some sort of masking on each image as well as more
alpha channel manipulation. Unfortunately, I couldn’t find an appropriate
method for making these edits.</span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='font-size:14.0pt;line-height:107%'>&nbsp;</span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='font-size:14.0pt;line-height:107%'>&nbsp;</span></p>

</div>

</body>

</html>
